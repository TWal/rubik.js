//License: https://github.com/TWal/rubik.js/blob/master/LICENSE and https://github.com/toji/gl-matrix/blob/master/LICENSE.md (glmatrix)

(function(l){var x;"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(x={},define(function(){return x})):x="undefined"!=typeof window?window:l:x=exports;(function(l){if(!x)var x=1E-6;if(!t)var t="undefined"!=typeof Float32Array?Float32Array:Array;if(!D)var D=Math.random;var w={setMatrixArrayType:function(a){t=a}};"undefined"!=typeof l&&(l.glMatrix=w);var u={create:function(){var a=new t(2);return a[0]=0,a[1]=0,a},clone:function(a){var b=new t(2);return b[0]=
a[0],b[1]=a[1],b},fromValues:function(a,b){var c=new t(2);return c[0]=a,c[1]=b,c},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a},set:function(a,b,c){return a[0]=b,a[1]=c,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},subtract:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}};u.sub=u.subtract;u.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a};u.mul=u.multiply;u.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a};u.div=u.divide;u.min=function(a,b,
c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};u.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};u.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};u.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a};u.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)};u.dist=u.distance;u.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d};u.sqrDist=u.squaredDistance;u.length=function(a){var b=
a[0];a=a[1];return Math.sqrt(b*b+a*a)};u.len=u.length;u.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};u.sqrLen=u.squaredLength;u.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};u.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c),a};u.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};u.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};u.lerp=function(a,b,c,d){var e=b[0];b=b[1];return a[0]=e+d*(c[0]-e),a[1]=
b+d*(c[1]-b),a};u.random=function(a,b){b=b||1;var c=2*D()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};u.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};u.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};u.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};u.transformMat4=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*
b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};u.forEach=function(){var a=u.create();return function(b,c,d,e,f,g){var h;c||(c=2);d||(d=0);for(e?h=Math.min(e*c+d,b.length):h=b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],f(a,a,g),b[d]=a[0],b[d+1]=a[1];return b}}();u.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!=typeof l&&(l.vec2=u);var q={create:function(){var a=new t(3);return a[0]=0,a[1]=0,a[2]=0,a},clone:function(a){var b=new t(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},fromValues:function(a,b,c){var d=
new t(3);return d[0]=a,d[1]=b,d[2]=c,d},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},set:function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},subtract:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a}};q.sub=q.subtract;q.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a};q.mul=q.multiply;q.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],
a};q.div=q.divide;q.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a};q.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a};q.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a};q.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a};q.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)};q.dist=q.distance;
q.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a};q.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],c=c*c+d*d+e*e;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*
c),a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];return a[0]=e*c-b*g,a[1]=b*f-d*c,a[2]=d*g-e*f,a};q.lerp=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=b+d*(c[2]-b),a};q.random=function(a,b){b=b||1;var c=2*D()*Math.PI,d=2*D()-1,e=Math.sqrt(1-d*d)*b;return a[0]=Math.cos(c)*e,a[1]=Math.sin(c)*e,a[2]=d*b,a};q.transformMat4=function(a,b,c){var d=b[0],e=b[1];b=b[2];return a[0]=
c[0]*d+c[4]*e+c[8]*b+c[12],a[1]=c[1]*d+c[5]*e+c[9]*b+c[13],a[2]=c[2]*d+c[6]*e+c[10]*b+c[14],a};q.transformMat3=function(a,b,c){var d=b[0],e=b[1];b=b[2];return a[0]=d*c[0]+e*c[3]+b*c[6],a[1]=d*c[1]+e*c[4]+b*c[7],a[2]=d*c[2]+e*c[5]+b*c[8],a};q.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var k=c*d+g*f-h*e,m=c*e+h*d-b*f,p=c*f+b*e-g*d,d=-b*d-g*e-h*f;return a[0]=k*c+d*-b+m*-h-p*-g,a[1]=m*c+d*-g+p*-b-k*-h,a[2]=p*c+d*-h+k*-g-m*-b,a};q.forEach=function(){var a=q.create();
return function(b,c,d,e,f,g){var h;c||(c=3);d||(d=0);for(e?h=Math.min(e*c+d,b.length):h=b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],f(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!=typeof l&&(l.vec3=q);var n={create:function(){var a=new t(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},clone:function(a){var b=new t(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},fromValues:function(a,b,c,d){var e=new t(4);return e[0]=
a,e[1]=b,e[2]=c,e[3]=d,e},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},set:function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},subtract:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a}};n.sub=n.subtract;n.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a};n.mul=n.multiply;n.divide=function(a,b,c){return a[0]=
b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a};n.div=n.divide;n.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a};n.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a};n.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a};n.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+
c[2]*d,a[3]=b[3]+c[3]*d,a};n.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)};n.dist=n.distance;n.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f};n.sqrDist=n.squaredDistance;n.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};n.len=n.length;n.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a};n.sqrLen=n.squaredLength;
n.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a};n.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],c=c*c+d*d+e*e+f*f;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c),a};n.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};n.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=b+d*(c[3]-b),a};n.random=function(a,b){return b=b||1,a[0]=D(),a[1]=D(),a[2]=
D(),a[3]=D(),n.normalize(a,a),n.scale(a,a,b),a};n.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*b,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*b,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*b,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*b,a};n.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var k=c*d+g*f-h*e,m=c*e+h*d-b*f,p=c*f+b*e-g*d,d=-b*d-g*e-h*f;return a[0]=k*c+d*-b+m*-h-p*-g,a[1]=m*c+d*-g+p*-b-k*-h,a[2]=p*c+d*-h+k*-g-m*-b,a};n.forEach=
function(){var a=n.create();return function(b,c,d,e,f,g){var h;c||(c=4);d||(d=0);for(e?h=Math.min(e*c+d,b.length):h=b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],f(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2],b[d+3]=a[3];return b}}();n.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof l&&(l.vec4=n);w={create:function(){var a=new t(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},clone:function(a){var b=new t(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},adjoint:function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},determinant:function(a){return a[0]*a[3]-
a[2]*a[1]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];return a[0]=d*g+e*k,a[1]=d*h+e*c,a[2]=f*g+b*k,a[3]=f*h+b*c,a}};w.mul=w.multiply;w.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c+e*g,a[1]=d*-g+e*c,a[2]=f*c+b*g,a[3]=f*-g+b*c,a};w.scale=function(a,b,c){var d=b[1],e=b[2],f=b[3],g=c[0];c=c[1];return a[0]=b[0]*g,a[1]=d*c,a[2]=e*g,a[3]=f*c,a};w.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+")"};"undefined"!=typeof l&&(l.mat2=w);w={create:function(){var a=new t(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},clone:function(a){var b=new t(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=c*f-d*e;return k?(k=1/k,a[0]=f*
k,a[1]=-d*k,a[2]=-e*k,a[3]=c*k,a[4]=(e*h-f*g)*k,a[5]=(d*g-c*h)*k,a):null},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=c[0],m=c[1],p=c[2],r=c[3],y=c[4];c=c[5];return a[0]=d*k+e*p,a[1]=d*m+e*r,a[2]=f*k+g*p,a[3]=f*m+g*r,a[4]=k*h+p*b+y,a[5]=m*h+r*b+c,a}};w.mul=w.multiply;w.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=Math.sin(c);c=Math.cos(c);return a[0]=d*c+e*k,a[1]=-d*k+e*c,a[2]=f*c+g*
k,a[3]=-f*k+c*g,a[4]=c*h+k*b,a[5]=c*b-k*h,a};w.scale=function(a,b,c){var d=c[0];c=c[1];return a[0]=b[0]*d,a[1]=b[1]*c,a[2]=b[2]*d,a[3]=b[3]*c,a[4]=b[4]*d,a[5]=b[5]*c,a};w.translate=function(a,b,c){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4]+c[0],a[5]=b[5]+c[1],a};w.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};"undefined"!=typeof l&&(l.mat2d=w);var E={create:function(){var a=new t(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,
a[7]=0,a[8]=1,a},fromMat4:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},clone:function(a){var b=new t(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,
b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],m=b[7],p=b[8],r=p*g-h*m,y=-p*f+h*k,v=m*f-g*k,z=c*r+d*y+e*v;return z?(z=1/z,a[0]=r*z,a[1]=(-p*d+e*m)*z,a[2]=(h*d-e*g)*z,a[3]=y*z,a[4]=(p*c-e*k)*z,a[5]=(-h*c+e*f)*z,a[6]=v*z,a[7]=(-m*c+d*k)*z,a[8]=(g*c-d*f)*z,a):null},adjoint:function(a,
b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],m=b[7],p=b[8];return a[0]=g*p-h*m,a[1]=e*m-d*p,a[2]=d*h-e*g,a[3]=h*k-f*p,a[4]=c*p-e*k,a[5]=e*f-c*h,a[6]=f*m-g*k,a[7]=d*k-c*m,a[8]=c*g-d*f,a},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],m=b[6],p=b[7];b=b[8];var r=c[0],y=c[1],v=c[2],z=c[3],J=c[4],O=c[5],l=c[6],n=c[7];c=c[8];return a[0]=r*d+y*g+v*
m,a[1]=r*e+y*h+v*p,a[2]=r*f+y*k+v*b,a[3]=z*d+J*g+O*m,a[4]=z*e+J*h+O*p,a[5]=z*f+J*k+O*b,a[6]=l*d+n*g+c*m,a[7]=l*e+n*h+c*p,a[8]=l*f+n*k+c*b,a}};E.mul=E.multiply;E.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],m=b[6],p=b[7];b=b[8];var r=c[0];c=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=k,a[6]=r*d+c*g+m,a[7]=r*e+c*h+p,a[8]=r*f+c*k+b,a};E.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],m=b[6],p=b[7];b=b[8];var r=Math.sin(c);c=Math.cos(c);return a[0]=
c*d+r*g,a[1]=c*e+r*h,a[2]=c*f+r*k,a[3]=c*g-r*d,a[4]=c*h-r*e,a[5]=c*k-r*f,a[6]=m,a[7]=p,a[8]=b,a};E.scale=function(a,b,c){var d=c[0];c=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=c*b[3],a[4]=c*b[4],a[5]=c*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a};E.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a};E.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,k=e+e,m=c*g,p=c*h,c=c*k,r=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return a[0]=
1-(r+e),a[3]=p+f,a[6]=c-h,a[1]=p-f,a[4]=1-(m+e),a[7]=d+g,a[2]=c+h,a[5]=d-g,a[8]=1-(m+r),a};E.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],m=b[7],p=b[8],r=b[9],y=b[10],v=b[11],z=b[12],J=b[13],l=b[14],n=b[15],q=c*h-d*g,t=c*k-e*g,u=c*m-f*g,s=d*k-e*h,x=d*m-f*h,w=e*m-f*k,A=p*J-r*z,F=p*l-y*z,p=p*n-v*z,G=r*l-y*J,r=r*n-v*J,y=y*n-v*l;return(v=q*y-t*r+u*G+s*p-x*F+w*A)?(v=1/v,a[0]=(h*y-k*r+m*G)*v,a[1]=(k*p-g*y-m*F)*v,a[2]=(g*r-h*p+m*A)*v,a[3]=(e*r-d*y-f*G)*v,a[4]=(c*y-e*
p+f*F)*v,a[5]=(d*p-c*r-f*A)*v,a[6]=(J*w-l*x+n*s)*v,a[7]=(l*u-z*w-n*t)*v,a[8]=(z*x-J*u+n*q)*v,a):null};E.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};"undefined"!=typeof l&&(l.mat3=E);var A={create:function(){var a=new t(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},clone:function(a){var b=new t(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,
b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],m=b[7],p=b[8],r=b[9],y=b[10],v=b[11],z=b[12],l=b[13],n=b[14],q=b[15],t=
c*h-d*g,u=c*k-e*g,s=c*m-f*g,B=d*k-e*h,x=d*m-f*h,w=e*m-f*k,A=p*l-r*z,F=p*n-y*z,G=p*q-v*z,D=r*n-y*l,E=r*q-v*l,I=y*q-v*n,C=t*I-u*E+s*D+B*G-x*F+w*A;return C?(C=1/C,a[0]=(h*I-k*E+m*D)*C,a[1]=(e*E-d*I-f*D)*C,a[2]=(l*w-n*x+q*B)*C,a[3]=(y*x-r*w-v*B)*C,a[4]=(k*G-g*I-m*F)*C,a[5]=(c*I-e*G+f*F)*C,a[6]=(n*s-z*w-q*u)*C,a[7]=(p*w-y*s+v*u)*C,a[8]=(g*E-h*G+m*A)*C,a[9]=(d*G-c*E-f*A)*C,a[10]=(z*x-l*s+q*t)*C,a[11]=(r*s-p*x-v*t)*C,a[12]=(h*F-g*D-k*A)*C,a[13]=(c*D-d*F+e*A)*C,a[14]=(l*u-z*B-n*t)*C,a[15]=(p*B-r*u+y*t)*C,
a):null},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],m=b[7],p=b[8],r=b[9],y=b[10],v=b[11],z=b[12],l=b[13],n=b[14],q=b[15];return a[0]=h*(y*q-v*n)-r*(k*q-m*n)+l*(k*v-m*y),a[1]=-(d*(y*q-v*n)-r*(e*q-f*n)+l*(e*v-f*y)),a[2]=d*(k*q-m*n)-h*(e*q-f*n)+l*(e*m-f*k),a[3]=-(d*(k*v-m*y)-h*(e*v-f*y)+r*(e*m-f*k)),a[4]=-(g*(y*q-v*n)-p*(k*q-m*n)+z*(k*v-m*y)),a[5]=c*(y*q-v*n)-p*(e*q-f*n)+z*(e*v-f*y),a[6]=-(c*(k*q-m*n)-g*(e*q-f*n)+z*(e*m-f*k)),a[7]=c*(k*v-m*y)-g*(e*v-f*y)+p*(e*m-f*k),a[8]=
g*(r*q-v*l)-p*(h*q-m*l)+z*(h*v-m*r),a[9]=-(c*(r*q-v*l)-p*(d*q-f*l)+z*(d*v-f*r)),a[10]=c*(h*q-m*l)-g*(d*q-f*l)+z*(d*m-f*h),a[11]=-(c*(h*v-m*r)-g*(d*v-f*r)+p*(d*m-f*h)),a[12]=-(g*(r*n-y*l)-p*(h*n-k*l)+z*(h*y-k*r)),a[13]=c*(r*n-y*l)-p*(d*n-e*l)+z*(d*y-e*r),a[14]=-(c*(h*n-k*l)-g*(d*n-e*l)+z*(d*k-e*h)),a[15]=c*(h*y-k*r)-g*(d*y-e*r)+p*(d*k-e*h),a},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],m=a[8],p=a[9],r=a[10],n=a[11],v=a[12],l=a[13],q=a[14];a=a[15];return(b*g-
c*f)*(r*a-n*q)-(b*h-d*f)*(p*a-n*l)+(b*k-e*f)*(p*q-r*l)+(c*h-d*g)*(m*a-n*v)-(c*k-e*g)*(m*q-r*v)+(d*k-e*h)*(m*l-p*v)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],m=b[6],p=b[7],r=b[8],n=b[9],v=b[10],l=b[11],q=b[12],t=b[13],u=b[14];b=b[15];var s=c[0],x=c[1],w=c[2],B=c[3];return a[0]=s*d+x*h+w*r+B*q,a[1]=s*e+x*k+w*n+B*t,a[2]=s*f+x*m+w*v+B*u,a[3]=s*g+x*p+w*l+B*b,s=c[4],x=c[5],w=c[6],B=c[7],a[4]=s*d+x*h+w*r+B*q,a[5]=s*e+x*k+w*n+B*t,a[6]=s*f+x*m+w*v+B*u,a[7]=s*g+x*p+w*l+B*b,s=c[8],
x=c[9],w=c[10],B=c[11],a[8]=s*d+x*h+w*r+B*q,a[9]=s*e+x*k+w*n+B*t,a[10]=s*f+x*m+w*v+B*u,a[11]=s*g+x*p+w*l+B*b,s=c[12],x=c[13],w=c[14],B=c[15],a[12]=s*d+x*h+w*r+B*q,a[13]=s*e+x*k+w*n+B*t,a[14]=s*f+x*m+w*v+B*u,a[15]=s*g+x*p+w*l+B*b,a}};A.mul=A.multiply;A.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,h,k,m,p,r,n,v,l,q,s;return b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],
k=b[3],m=b[4],p=b[5],r=b[6],n=b[7],v=b[8],l=b[9],q=b[10],s=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=k,a[4]=m,a[5]=p,a[6]=r,a[7]=n,a[8]=v,a[9]=l,a[10]=q,a[11]=s,a[12]=f*d+m*e+v*c+b[12],a[13]=g*d+p*e+l*c+b[13],a[14]=h*d+r*e+q*c+b[14],a[15]=k*d+n*e+s*c+b[15]),a};A.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],
a};A.rotate=function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var g=Math.sqrt(e*e+f*f+d*d),h,k,m,p,r,n,l,q,s,t,u,w,A,D,B,E,H,L,F,G,M,N,I,C;return Math.abs(g)<x?null:(g=1/g,e*=g,f*=g,d*=g,h=Math.sin(c),k=Math.cos(c),m=1-k,p=b[0],r=b[1],n=b[2],l=b[3],q=b[4],s=b[5],t=b[6],u=b[7],w=b[8],A=b[9],D=b[10],B=b[11],E=e*e*m+k,H=f*e*m+d*h,L=d*e*m-f*h,F=e*f*m-d*h,G=f*f*m+k,M=d*f*m+e*h,N=e*d*m+f*h,I=f*d*m-e*h,C=d*d*m+k,a[0]=p*E+q*H+w*L,a[1]=r*E+s*H+A*L,a[2]=n*E+t*H+D*L,a[3]=l*E+u*H+B*L,a[4]=p*F+q*G+w*M,a[5]=r*F+s*G+A*
M,a[6]=n*F+t*G+D*M,a[7]=l*F+u*G+B*M,a[8]=p*N+q*I+w*C,a[9]=r*N+s*I+A*C,a[10]=n*N+t*I+D*C,a[11]=l*N+u*I+B*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)};A.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],k=b[8],m=b[9],p=b[10],r=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=e*c+k*d,a[5]=f*c+m*d,a[6]=g*c+p*d,a[7]=h*c+r*d,a[8]=k*c-e*d,a[9]=m*c-f*d,a[10]=p*c-g*d,a[11]=r*c-h*d,a};A.rotateY=
function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[8],m=b[9],p=b[10],r=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*c-k*d,a[1]=f*c-m*d,a[2]=g*c-p*d,a[3]=h*c-r*d,a[8]=e*d+k*c,a[9]=f*d+m*c,a[10]=g*d+p*c,a[11]=h*d+r*c,a};A.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],m=b[5],p=b[6],r=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*c+k*d,a[1]=f*c+m*d,a[2]=g*c+p*d,a[3]=h*c+r*d,a[4]=k*c-e*d,a[5]=m*c-f*d,a[6]=p*c-g*d,a[7]=r*c-h*d,a};A.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,k=e+e,m=f+f;b=d*h;var p=d*k,d=d*m,r=e*k,e=e*m,f=f*m,h=g*h,k=g*k,g=g*m;return a[0]=1-(r+f),a[1]=p+g,a[2]=d-k,a[3]=0,a[4]=p-g,a[5]=1-(b+f),a[6]=e+h,a[7]=0,a[8]=d+k,a[9]=e-h,a[10]=1-(b+r),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a};A.fromQuat=function(a,b){var c=b[0],
d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,k=e+e,m=c*g,p=c*h,c=c*k,r=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return a[0]=1-(r+e),a[1]=p+f,a[2]=c-h,a[3]=0,a[4]=p-f,a[5]=1-(m+e),a[6]=d+g,a[7]=0,a[8]=c+h,a[9]=d-g,a[10]=1-(m+r),a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};A.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),k=1/(e-d),m=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*k,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*k,a[10]=(g+f)*m,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*(g*f)*m,a[15]=0,a};A.perspective=function(a,
b,c,d,e){b=1/Math.tan(b/2);var f=1/(d-e);return a[0]=b/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*f,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*f,a[15]=0,a};A.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),k=1/(d-e),m=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*k,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*m,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*k,a[14]=(g+f)*m,a[15]=1,a};A.lookAt=function(a,b,c,d){var e,f,g,h,k,m,p,r,n,l,q=b[0],s=b[1];b=b[2];var t=d[0],u=d[1];d=d[2];
var w=c[0],D=c[1];c=c[2];return Math.abs(q-w)<x&&Math.abs(s-D)<x&&Math.abs(b-c)<x?A.identity(a):(p=q-w,r=s-D,n=b-c,l=1/Math.sqrt(p*p+r*r+n*n),p*=l,r*=l,n*=l,e=u*n-d*r,f=d*p-t*n,g=t*r-u*p,l=Math.sqrt(e*e+f*f+g*g),l?(l=1/l,e*=l,f*=l,g*=l):(e=0,f=0,g=0),h=r*g-n*f,k=n*e-p*g,m=p*f-r*e,l=Math.sqrt(h*h+k*k+m*m),l?(l=1/l,h*=l,k*=l,m*=l):(h=0,k=0,m=0),a[0]=e,a[1]=h,a[2]=p,a[3]=0,a[4]=f,a[5]=k,a[6]=r,a[7]=0,a[8]=g,a[9]=m,a[10]=n,a[11]=0,a[12]=-(e*q+f*s+g*b),a[13]=-(h*q+k*s+m*b),a[14]=-(p*q+r*s+n*b),a[15]=1,
a)};A.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};"undefined"!=typeof l&&(l.mat4=A);var s={create:function(){var a=new t(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}};s.rotationTo=function(){var a=q.create(),b=q.fromValues(1,0,0),c=q.fromValues(0,1,0);return function(d,e,f){var g=q.dot(e,f);return-0.999999>g?(q.cross(a,b,e),1E-6>q.length(a)&&q.cross(a,
c,e),q.normalize(a,a),s.setAxisAngle(d,a,Math.PI),d):0.999999<g?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(q.cross(a,e,f),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+g,s.normalize(d,d))}}();s.setAxes=function(){var a=E.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=c[0],a[5]=c[1],a[8]=c[2],s.normalize(b,s.fromMat3(b,a))}}();s.clone=n.clone;s.fromValues=n.fromValues;s.copy=n.copy;s.set=n.set;s.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};s.setAxisAngle=
function(a,b,c){c*=0.5;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a};s.add=n.add;s.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];return a[0]=d*c+b*g+e*k-f*h,a[1]=e*c+b*h+f*g-d*k,a[2]=f*c+b*k+d*h-e*g,a[3]=b*c-d*g-e*h-f*k,a};s.mul=s.multiply;s.scale=n.scale;s.rotateX=function(a,b,c){c*=0.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c+b*g,a[1]=e*c+f*g,a[2]=f*c-e*g,a[3]=b*c-d*g,a};s.rotateY=
function(a,b,c){c*=0.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c-f*g,a[1]=e*c+b*g,a[2]=f*c+d*g,a[3]=b*c-e*g,a};s.rotateZ=function(a,b,c){c*=0.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c+e*g,a[1]=e*c-d*g,a[2]=f*c+b*g,a[3]=b*c-f*g,a};s.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a};s.dot=n.dot;s.lerp=n.lerp;s.slerp=function(a,b,c,d){var e=b[0],f=b[1],
g=b[2];b=b[3];var h=c[0],k=c[1],m=c[2];c=c[3];var l,n,q,s,t;return n=e*h+f*k+g*m+b*c,0>n&&(n=-n,h=-h,k=-k,m=-m,c=-c),1E-6<1-n?(l=Math.acos(n),q=Math.sin(l),s=Math.sin((1-d)*l)/q,t=Math.sin(d*l)/q):(s=1-d,t=d),a[0]=s*e+t*h,a[1]=s*f+t*k,a[2]=s*g+t*m,a[3]=s*b+t*c,a};s.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,g=g?1/g:0;return a[0]=-c*g,a[1]=-d*g,a[2]=-e*g,a[3]=f*g,a};s.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a};s.length=n.length;s.len=s.length;
s.squaredLength=n.squaredLength;s.sqrLen=s.squaredLength;s.normalize=n.normalize;s.fromMat3=function(){var a="undefined"!=typeof Int8Array?new Int8Array([1,2,0]):[1,2,0];return function(b,c){var d=c[0]+c[4]+c[8];if(0<d)d=Math.sqrt(d+1),b[3]=0.5*d,d=0.5/d,b[0]=(c[7]-c[5])*d,b[1]=(c[2]-c[6])*d,b[2]=(c[3]-c[1])*d;else{var e=0;c[4]>c[0]&&(e=1);c[8]>c[3*e+e]&&(e=2);var f=a[e],g=a[f],d=Math.sqrt(c[3*e+e]-c[3*f+f]-c[3*g+g]+1);b[e]=0.5*d;d=0.5/d;b[3]=(c[3*g+f]-c[3*f+g])*d;b[f]=(c[3*f+e]+c[3*e+f])*d;b[g]=
(c[3*g+e]+c[3*e+g])*d}return b}}();s.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof l&&(l.quat=s)})(x)})(this);(function(l){l.Rubikjs={};l.Rubikjs.Render={};l.Rubikjs.Render.SVG={};l.Rubikjs.Render.Canvas={};l.Rubikjs.Render.WebGL={};l.Rubikjs.Twisty={};l.Rubikjs.Notation={};l.Rubikjs.Puzzle={}})("undefined"!=typeof exports?global:this);Rubikjs.Render.Buffer=function(l){l&&(this.data=l)};Rubikjs.Render.Buffer.prototype.feed=function(l){this.data=l};
Rubikjs.Render.Buffer.prototype.copy=function(){return new Rubikjs.Render.Buffer(this.data)};Rubikjs.Render.Renderer=function(l){l&&(this.perspectiveMat=mat4.create(),mat4.perspective(this.perspectiveMat,70,l.offsetWidth/l.offsetHeight,0.1,100),this.element=l)};Rubikjs.Render.Renderer.prototype.startFrame=function(){};Rubikjs.Render.Renderer.prototype.render=function(l){};Rubikjs.Render.Renderer.prototype.endFrame=function(){};Rubikjs.Render.Renderer.prototype.createMesh=function(){return new Rubikjs.Mesh};
Rubikjs.Render.Mesh=function(){this.transform=mat4.create();this.vertexBuffer=new Rubikjs.Render.Buffer;this.colorBuffer=new Rubikjs.Render.Buffer;this.indexBuffer=new Rubikjs.Render.Buffer};
Rubikjs.Render.RenderManager=function(l){this.meshs=[];this.renderer=l?new l(document.getElementById("cube")):new Rubikjs.WebGL.Renderer(document.getElementById("cube"));mat4.translate(this.renderer.perspectiveMat,this.renderer.perspectiveMat,[0,0,-15]);mat4.rotateX(this.renderer.perspectiveMat,this.renderer.perspectiveMat,Math.PI/6);mat4.rotateY(this.renderer.perspectiveMat,this.renderer.perspectiveMat,-Math.PI/6)};
Rubikjs.Render.RenderManager.prototype.render=function(){this.renderer.startFrame();var l=this;this.meshs.forEach(function(x){l.renderer.render(x)});this.renderer.endFrame()};Rubikjs.Render.PieceFactory=function(l,x,H,K,t,D){this.pieceConstructor=l;this.vertexBuffer=x;this.indexBuffer=H;this.colorBuffer=K;this.namedColorBuffer=t;this.defaultColors=D};
Rubikjs.Render.PieceFactory.prototype.create=function(l,x,H){var K={},t;for(t in this.defaultColors)K[t]=this.defaultColors[t];for(t in H)K[t]=H[t];t=this.namedColorBuffer.map(function(l){return K[l]}).reduce(function(l,t){return l.concat(t)},[]);H=this.colorBuffer.copy();H.feed(t);t=new Rubikjs.Render.Mesh;t.vertexBuffer=this.vertexBuffer;t.indexBuffer=this.indexBuffer;t.colorBuffer=H;mat4.translate(t.transform,t.transform,l);mat4.rotateX(t.transform,t.transform,x[0]);mat4.rotateY(t.transform,t.transform,
x[1]);mat4.rotateZ(t.transform,t.transform,x[2]);return new this.pieceConstructor(t)};
