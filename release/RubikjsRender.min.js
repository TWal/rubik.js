//License: https://github.com/TWal/rubik.js/blob/master/LICENSE and https://github.com/toji/gl-matrix/blob/master/LICENSE.md (glmatrix)

(function(v){var u;"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(u={},define(function(){return u})):u="undefined"!=typeof window?window:v:u=exports;(function(s){if(!v)var v=1E-6;if(!p)var p="undefined"!=typeof Float32Array?Float32Array:Array;if(!D)var D=Math.random;var y={setMatrixArrayType:function(a){p=a}};"undefined"!=typeof s&&(s.glMatrix=y);var w={create:function(){var a=new p(2);return a[0]=0,a[1]=0,a},clone:function(a){var b=new p(2);return b[0]=
a[0],b[1]=a[1],b},fromValues:function(a,b){var c=new p(2);return c[0]=a,c[1]=b,c},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a},set:function(a,b,c){return a[0]=b,a[1]=c,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},subtract:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}};w.sub=w.subtract;w.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a};w.mul=w.multiply;w.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a};w.div=w.divide;w.min=function(a,b,
c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};w.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};w.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};w.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a};w.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)};w.dist=w.distance;w.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d};w.sqrDist=w.squaredDistance;w.length=function(a){var b=
a[0];a=a[1];return Math.sqrt(b*b+a*a)};w.len=w.length;w.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};w.sqrLen=w.squaredLength;w.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};w.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c),a};w.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};w.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};w.lerp=function(a,b,c,d){var e=b[0];b=b[1];return a[0]=e+d*(c[0]-e),a[1]=
b+d*(c[1]-b),a};w.random=function(a,b){b=b||1;var c=2*D()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};w.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};w.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};w.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};w.transformMat4=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*
b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};w.forEach=function(){var a=w.create();return function(b,c,d,e,f,g){var h;c||(c=2);d||(d=0);for(e?h=Math.min(e*c+d,b.length):h=b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],f(a,a,g),b[d]=a[0],b[d+1]=a[1];return b}}();w.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!=typeof s&&(s.vec2=w);var n={create:function(){var a=new p(3);return a[0]=0,a[1]=0,a[2]=0,a},clone:function(a){var b=new p(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},fromValues:function(a,b,c){var d=
new p(3);return d[0]=a,d[1]=b,d[2]=c,d},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},set:function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},subtract:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a}};n.sub=n.subtract;n.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a};n.mul=n.multiply;n.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],
a};n.div=n.divide;n.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a};n.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a};n.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a};n.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a};n.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)};n.dist=n.distance;
n.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e};n.sqrDist=n.squaredDistance;n.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};n.len=n.length;n.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};n.sqrLen=n.squaredLength;n.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a};n.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],c=c*c+d*d+e*e;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*
c),a};n.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};n.cross=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];return a[0]=e*c-b*g,a[1]=b*f-d*c,a[2]=d*g-e*f,a};n.lerp=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=b+d*(c[2]-b),a};n.random=function(a,b){b=b||1;var c=2*D()*Math.PI,d=2*D()-1,e=Math.sqrt(1-d*d)*b;return a[0]=Math.cos(c)*e,a[1]=Math.sin(c)*e,a[2]=d*b,a};n.transformMat4=function(a,b,c){var d=b[0],e=b[1];b=b[2];return a[0]=
c[0]*d+c[4]*e+c[8]*b+c[12],a[1]=c[1]*d+c[5]*e+c[9]*b+c[13],a[2]=c[2]*d+c[6]*e+c[10]*b+c[14],a};n.transformMat3=function(a,b,c){var d=b[0],e=b[1];b=b[2];return a[0]=d*c[0]+e*c[3]+b*c[6],a[1]=d*c[1]+e*c[4]+b*c[7],a[2]=d*c[2]+e*c[5]+b*c[8],a};n.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var k=c*d+g*f-h*e,l=c*e+h*d-b*f,q=c*f+b*e-g*d,d=-b*d-g*e-h*f;return a[0]=k*c+d*-b+l*-h-q*-g,a[1]=l*c+d*-g+q*-b-k*-h,a[2]=q*c+d*-h+k*-g-l*-b,a};n.forEach=function(){var a=n.create();
return function(b,c,d,e,f,g){var h;c||(c=3);d||(d=0);for(e?h=Math.min(e*c+d,b.length):h=b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],f(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();n.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!=typeof s&&(s.vec3=n);var m={create:function(){var a=new p(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},clone:function(a){var b=new p(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},fromValues:function(a,b,c,d){var e=new p(4);return e[0]=
a,e[1]=b,e[2]=c,e[3]=d,e},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},set:function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},subtract:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a}};m.sub=m.subtract;m.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a};m.mul=m.multiply;m.divide=function(a,b,c){return a[0]=
b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a};m.div=m.divide;m.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a};m.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a};m.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a};m.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+
c[2]*d,a[3]=b[3]+c[3]*d,a};m.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)};m.dist=m.distance;m.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f};m.sqrDist=m.squaredDistance;m.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};m.len=m.length;m.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a};m.sqrLen=m.squaredLength;
m.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a};m.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],c=c*c+d*d+e*e+f*f;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c),a};m.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};m.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=b+d*(c[3]-b),a};m.random=function(a,b){return b=b||1,a[0]=D(),a[1]=D(),a[2]=
D(),a[3]=D(),m.normalize(a,a),m.scale(a,a,b),a};m.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*b,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*b,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*b,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*b,a};m.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var k=c*d+g*f-h*e,l=c*e+h*d-b*f,q=c*f+b*e-g*d,d=-b*d-g*e-h*f;return a[0]=k*c+d*-b+l*-h-q*-g,a[1]=l*c+d*-g+q*-b-k*-h,a[2]=q*c+d*-h+k*-g-l*-b,a};m.forEach=
function(){var a=m.create();return function(b,c,d,e,f,g){var h;c||(c=4);d||(d=0);for(e?h=Math.min(e*c+d,b.length):h=b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],f(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2],b[d+3]=a[3];return b}}();m.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof s&&(s.vec4=m);y={create:function(){var a=new p(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},clone:function(a){var b=new p(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},adjoint:function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},determinant:function(a){return a[0]*a[3]-
a[2]*a[1]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];return a[0]=d*g+e*k,a[1]=d*h+e*c,a[2]=f*g+b*k,a[3]=f*h+b*c,a}};y.mul=y.multiply;y.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c+e*g,a[1]=d*-g+e*c,a[2]=f*c+b*g,a[3]=f*-g+b*c,a};y.scale=function(a,b,c){var d=b[1],e=b[2],f=b[3],g=c[0];c=c[1];return a[0]=b[0]*g,a[1]=d*c,a[2]=e*g,a[3]=f*c,a};y.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+")"};"undefined"!=typeof s&&(s.mat2=y);y={create:function(){var a=new p(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},clone:function(a){var b=new p(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=c*f-d*e;return k?(k=1/k,a[0]=f*
k,a[1]=-d*k,a[2]=-e*k,a[3]=c*k,a[4]=(e*h-f*g)*k,a[5]=(d*g-c*h)*k,a):null},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=c[0],l=c[1],q=c[2],r=c[3],z=c[4];c=c[5];return a[0]=d*k+e*q,a[1]=d*l+e*r,a[2]=f*k+g*q,a[3]=f*l+g*r,a[4]=k*h+q*b+z,a[5]=l*h+r*b+c,a}};y.mul=y.multiply;y.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4];b=b[5];var k=Math.sin(c);c=Math.cos(c);return a[0]=d*c+e*k,a[1]=-d*k+e*c,a[2]=f*c+g*
k,a[3]=-f*k+c*g,a[4]=c*h+k*b,a[5]=c*b-k*h,a};y.scale=function(a,b,c){var d=c[0];c=c[1];return a[0]=b[0]*d,a[1]=b[1]*c,a[2]=b[2]*d,a[3]=b[3]*c,a[4]=b[4]*d,a[5]=b[5]*c,a};y.translate=function(a,b,c){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4]+c[0],a[5]=b[5]+c[1],a};y.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};"undefined"!=typeof s&&(s.mat2d=y);var u={create:function(){var a=new p(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,
a[7]=0,a[8]=1,a},fromMat4:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},clone:function(a){var b=new p(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,
b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],q=b[8],r=q*g-h*l,z=-q*f+h*k,t=l*f-g*k,A=c*r+d*z+e*t;return A?(A=1/A,a[0]=r*A,a[1]=(-q*d+e*l)*A,a[2]=(h*d-e*g)*A,a[3]=z*A,a[4]=(q*c-e*k)*A,a[5]=(-h*c+e*f)*A,a[6]=t*A,a[7]=(-l*c+d*k)*A,a[8]=(g*c-d*f)*A,a):null},adjoint:function(a,
b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],q=b[8];return a[0]=g*q-h*l,a[1]=e*l-d*q,a[2]=d*h-e*g,a[3]=h*k-f*q,a[4]=c*q-e*k,a[5]=e*f-c*h,a[6]=f*l-g*k,a[7]=d*k-c*l,a[8]=c*g-d*f,a},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],q=b[7];b=b[8];var r=c[0],z=c[1],t=c[2],A=c[3],I=c[4],O=c[5],E=c[6],m=c[7];c=c[8];return a[0]=r*d+z*g+t*
l,a[1]=r*e+z*h+t*q,a[2]=r*f+z*k+t*b,a[3]=A*d+I*g+O*l,a[4]=A*e+I*h+O*q,a[5]=A*f+I*k+O*b,a[6]=E*d+m*g+c*l,a[7]=E*e+m*h+c*q,a[8]=E*f+m*k+c*b,a}};u.mul=u.multiply;u.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],q=b[7];b=b[8];var r=c[0];c=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=k,a[6]=r*d+c*g+l,a[7]=r*e+c*h+q,a[8]=r*f+c*k+b,a};u.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],q=b[7];b=b[8];var r=Math.sin(c);c=Math.cos(c);return a[0]=
c*d+r*g,a[1]=c*e+r*h,a[2]=c*f+r*k,a[3]=c*g-r*d,a[4]=c*h-r*e,a[5]=c*k-r*f,a[6]=l,a[7]=q,a[8]=b,a};u.scale=function(a,b,c){var d=c[0];c=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=c*b[3],a[4]=c*b[4],a[5]=c*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a};u.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a};u.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,k=e+e,l=c*g,q=c*h,c=c*k,r=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return a[0]=
1-(r+e),a[3]=q+f,a[6]=c-h,a[1]=q-f,a[4]=1-(l+e),a[7]=d+g,a[2]=c+h,a[5]=d-g,a[8]=1-(l+r),a};u.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],q=b[8],r=b[9],z=b[10],t=b[11],A=b[12],I=b[13],m=b[14],E=b[15],n=c*h-d*g,p=c*k-e*g,w=c*l-f*g,x=d*k-e*h,v=d*l-f*h,s=e*l-f*k,u=q*I-r*A,y=q*m-z*A,q=q*E-t*A,B=r*m-z*I,r=r*E-t*I,z=z*E-t*m;return(t=n*z-p*r+w*B+x*q-v*y+s*u)?(t=1/t,a[0]=(h*z-k*r+l*B)*t,a[1]=(k*q-g*z-l*y)*t,a[2]=(g*r-h*q+l*u)*t,a[3]=(e*r-d*z-f*B)*t,a[4]=(c*z-e*
q+f*y)*t,a[5]=(d*q-c*r-f*u)*t,a[6]=(I*s-m*v+E*x)*t,a[7]=(m*w-A*s-E*p)*t,a[8]=(A*v-I*w+E*n)*t,a):null};u.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};"undefined"!=typeof s&&(s.mat3=u);var B={create:function(){var a=new p(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},clone:function(a){var b=new p(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,
b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],q=b[8],r=b[9],z=b[10],t=b[11],A=b[12],m=b[13],n=b[14],E=b[15],p=
c*h-d*g,w=c*k-e*g,x=c*l-f*g,v=d*k-e*h,s=d*l-f*h,u=e*l-f*k,y=q*m-r*A,B=q*n-z*A,D=q*E-t*A,F=r*n-z*m,G=r*E-t*m,H=z*E-t*n,C=p*H-w*G+x*F+v*D-s*B+u*y;return C?(C=1/C,a[0]=(h*H-k*G+l*F)*C,a[1]=(e*G-d*H-f*F)*C,a[2]=(m*u-n*s+E*v)*C,a[3]=(z*s-r*u-t*v)*C,a[4]=(k*D-g*H-l*B)*C,a[5]=(c*H-e*D+f*B)*C,a[6]=(n*x-A*u-E*w)*C,a[7]=(q*u-z*x+t*w)*C,a[8]=(g*G-h*D+l*y)*C,a[9]=(d*D-c*G-f*y)*C,a[10]=(A*s-m*x+E*p)*C,a[11]=(r*x-q*s-t*p)*C,a[12]=(h*B-g*F-k*y)*C,a[13]=(c*F-d*B+e*y)*C,a[14]=(m*w-A*v-n*p)*C,a[15]=(q*v-r*w+z*p)*C,
a):null},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],q=b[8],r=b[9],z=b[10],t=b[11],A=b[12],m=b[13],n=b[14],p=b[15];return a[0]=h*(z*p-t*n)-r*(k*p-l*n)+m*(k*t-l*z),a[1]=-(d*(z*p-t*n)-r*(e*p-f*n)+m*(e*t-f*z)),a[2]=d*(k*p-l*n)-h*(e*p-f*n)+m*(e*l-f*k),a[3]=-(d*(k*t-l*z)-h*(e*t-f*z)+r*(e*l-f*k)),a[4]=-(g*(z*p-t*n)-q*(k*p-l*n)+A*(k*t-l*z)),a[5]=c*(z*p-t*n)-q*(e*p-f*n)+A*(e*t-f*z),a[6]=-(c*(k*p-l*n)-g*(e*p-f*n)+A*(e*l-f*k)),a[7]=c*(k*t-l*z)-g*(e*t-f*z)+q*(e*l-f*k),a[8]=
g*(r*p-t*m)-q*(h*p-l*m)+A*(h*t-l*r),a[9]=-(c*(r*p-t*m)-q*(d*p-f*m)+A*(d*t-f*r)),a[10]=c*(h*p-l*m)-g*(d*p-f*m)+A*(d*l-f*h),a[11]=-(c*(h*t-l*r)-g*(d*t-f*r)+q*(d*l-f*h)),a[12]=-(g*(r*n-z*m)-q*(h*n-k*m)+A*(h*z-k*r)),a[13]=c*(r*n-z*m)-q*(d*n-e*m)+A*(d*z-e*r),a[14]=-(c*(h*n-k*m)-g*(d*n-e*m)+A*(d*k-e*h)),a[15]=c*(h*z-k*r)-g*(d*z-e*r)+q*(d*k-e*h),a},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],q=a[9],r=a[10],m=a[11],t=a[12],n=a[13],p=a[14];a=a[15];return(b*g-
c*f)*(r*a-m*p)-(b*h-d*f)*(q*a-m*n)+(b*k-e*f)*(q*p-r*n)+(c*h-d*g)*(l*a-m*t)-(c*k-e*g)*(l*p-r*t)+(d*k-e*h)*(l*n-q*t)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],q=b[7],r=b[8],m=b[9],t=b[10],n=b[11],p=b[12],w=b[13],x=b[14];b=b[15];var v=c[0],s=c[1],u=c[2],y=c[3];return a[0]=v*d+s*h+u*r+y*p,a[1]=v*e+s*k+u*m+y*w,a[2]=v*f+s*l+u*t+y*x,a[3]=v*g+s*q+u*n+y*b,v=c[4],s=c[5],u=c[6],y=c[7],a[4]=v*d+s*h+u*r+y*p,a[5]=v*e+s*k+u*m+y*w,a[6]=v*f+s*l+u*t+y*x,a[7]=v*g+s*q+u*n+y*b,v=c[8],
s=c[9],u=c[10],y=c[11],a[8]=v*d+s*h+u*r+y*p,a[9]=v*e+s*k+u*m+y*w,a[10]=v*f+s*l+u*t+y*x,a[11]=v*g+s*q+u*n+y*b,v=c[12],s=c[13],u=c[14],y=c[15],a[12]=v*d+s*h+u*r+y*p,a[13]=v*e+s*k+u*m+y*w,a[14]=v*f+s*l+u*t+y*x,a[15]=v*g+s*q+u*n+y*b,a}};B.mul=B.multiply;B.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,h,k,l,q,r,m,t,n,p,v;return b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],
k=b[3],l=b[4],q=b[5],r=b[6],m=b[7],t=b[8],n=b[9],p=b[10],v=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=k,a[4]=l,a[5]=q,a[6]=r,a[7]=m,a[8]=t,a[9]=n,a[10]=p,a[11]=v,a[12]=f*d+l*e+t*c+b[12],a[13]=g*d+q*e+n*c+b[13],a[14]=h*d+r*e+p*c+b[14],a[15]=k*d+m*e+v*c+b[15]),a};B.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],
a};B.rotate=function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var g=Math.sqrt(e*e+f*f+d*d),h,k,l,q,r,m,t,n,p,s,u,w,x,y,B,D,K,L,M,N,F,G,H,C;return Math.abs(g)<v?null:(g=1/g,e*=g,f*=g,d*=g,h=Math.sin(c),k=Math.cos(c),l=1-k,q=b[0],r=b[1],m=b[2],t=b[3],n=b[4],p=b[5],s=b[6],u=b[7],w=b[8],x=b[9],y=b[10],B=b[11],D=e*e*l+k,K=f*e*l+d*h,L=d*e*l-f*h,M=e*f*l-d*h,N=f*f*l+k,F=d*f*l+e*h,G=e*d*l+f*h,H=f*d*l-e*h,C=d*d*l+k,a[0]=q*D+n*K+w*L,a[1]=r*D+p*K+x*L,a[2]=m*D+s*K+y*L,a[3]=t*D+u*K+B*L,a[4]=q*M+n*N+w*F,a[5]=r*M+p*N+x*
F,a[6]=m*M+s*N+y*F,a[7]=t*M+u*N+B*F,a[8]=q*G+n*H+w*C,a[9]=r*G+p*H+x*C,a[10]=m*G+s*H+y*C,a[11]=t*G+u*H+B*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)};B.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],k=b[8],l=b[9],q=b[10],r=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=e*c+k*d,a[5]=f*c+l*d,a[6]=g*c+q*d,a[7]=h*c+r*d,a[8]=k*c-e*d,a[9]=l*c-f*d,a[10]=q*c-g*d,a[11]=r*c-h*d,a};B.rotateY=
function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[8],l=b[9],q=b[10],r=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*c-k*d,a[1]=f*c-l*d,a[2]=g*c-q*d,a[3]=h*c-r*d,a[8]=e*d+k*c,a[9]=f*d+l*c,a[10]=g*d+q*c,a[11]=h*d+r*c,a};B.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],l=b[5],q=b[6],r=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*c+k*d,a[1]=f*c+l*d,a[2]=g*c+q*d,a[3]=h*c+r*d,a[4]=k*c-e*d,a[5]=l*c-f*d,a[6]=q*c-g*d,a[7]=r*c-h*d,a};B.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,k=e+e,l=f+f;b=d*h;var q=d*k,d=d*l,r=e*k,e=e*l,f=f*l,h=g*h,k=g*k,g=g*l;return a[0]=1-(r+f),a[1]=q+g,a[2]=d-k,a[3]=0,a[4]=q-g,a[5]=1-(b+f),a[6]=e+h,a[7]=0,a[8]=d+k,a[9]=e-h,a[10]=1-(b+r),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a};B.fromQuat=function(a,b){var c=b[0],
d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,k=e+e,l=c*g,q=c*h,c=c*k,r=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;return a[0]=1-(r+e),a[1]=q+f,a[2]=c-h,a[3]=0,a[4]=q-f,a[5]=1-(l+e),a[6]=d+g,a[7]=0,a[8]=c+h,a[9]=d-g,a[10]=1-(l+r),a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};B.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),k=1/(e-d),l=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*k,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*k,a[10]=(g+f)*l,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*(g*f)*l,a[15]=0,a};B.perspective=function(a,
b,c,d,e){b=1/Math.tan(b/2);var f=1/(d-e);return a[0]=b/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*f,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*f,a[15]=0,a};B.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),k=1/(d-e),l=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*k,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*l,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*k,a[14]=(g+f)*l,a[15]=1,a};B.lookAt=function(a,b,c,d){var e,f,g,h,k,l,q,r,m,n,p=b[0],s=b[1];b=b[2];var u=d[0],w=d[1];d=d[2];
var x=c[0],y=c[1];c=c[2];return Math.abs(p-x)<v&&Math.abs(s-y)<v&&Math.abs(b-c)<v?B.identity(a):(q=p-x,r=s-y,m=b-c,n=1/Math.sqrt(q*q+r*r+m*m),q*=n,r*=n,m*=n,e=w*m-d*r,f=d*q-u*m,g=u*r-w*q,n=Math.sqrt(e*e+f*f+g*g),n?(n=1/n,e*=n,f*=n,g*=n):(e=0,f=0,g=0),h=r*g-m*f,k=m*e-q*g,l=q*f-r*e,n=Math.sqrt(h*h+k*k+l*l),n?(n=1/n,h*=n,k*=n,l*=n):(h=0,k=0,l=0),a[0]=e,a[1]=h,a[2]=q,a[3]=0,a[4]=f,a[5]=k,a[6]=r,a[7]=0,a[8]=g,a[9]=l,a[10]=m,a[11]=0,a[12]=-(e*p+f*s+g*b),a[13]=-(h*p+k*s+l*b),a[14]=-(q*p+r*s+m*b),a[15]=1,
a)};B.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};"undefined"!=typeof s&&(s.mat4=B);var x={create:function(){var a=new p(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}};x.rotationTo=function(){var a=n.create(),b=n.fromValues(1,0,0),c=n.fromValues(0,1,0);return function(d,e,f){var g=n.dot(e,f);return-0.999999>g?(n.cross(a,b,e),1E-6>n.length(a)&&n.cross(a,
c,e),n.normalize(a,a),x.setAxisAngle(d,a,Math.PI),d):0.999999<g?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(n.cross(a,e,f),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+g,x.normalize(d,d))}}();x.setAxes=function(){var a=u.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=c[0],a[5]=c[1],a[8]=c[2],x.normalize(b,x.fromMat3(b,a))}}();x.clone=m.clone;x.fromValues=m.fromValues;x.copy=m.copy;x.set=m.set;x.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};x.setAxisAngle=
function(a,b,c){c*=0.5;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a};x.add=m.add;x.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];return a[0]=d*c+b*g+e*k-f*h,a[1]=e*c+b*h+f*g-d*k,a[2]=f*c+b*k+d*h-e*g,a[3]=b*c-d*g-e*h-f*k,a};x.mul=x.multiply;x.scale=m.scale;x.rotateX=function(a,b,c){c*=0.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c+b*g,a[1]=e*c+f*g,a[2]=f*c-e*g,a[3]=b*c-d*g,a};x.rotateY=
function(a,b,c){c*=0.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c-f*g,a[1]=e*c+b*g,a[2]=f*c+d*g,a[3]=b*c-e*g,a};x.rotateZ=function(a,b,c){c*=0.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);return a[0]=d*c+e*g,a[1]=e*c-d*g,a[2]=f*c+b*g,a[3]=b*c-f*g,a};x.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a};x.dot=m.dot;x.lerp=m.lerp;x.slerp=function(a,b,c,d){var e=b[0],f=b[1],
g=b[2];b=b[3];var h=c[0],k=c[1],l=c[2];c=c[3];var n,m,p,t,s;return m=e*h+f*k+g*l+b*c,0>m&&(m=-m,h=-h,k=-k,l=-l,c=-c),1E-6<1-m?(n=Math.acos(m),p=Math.sin(n),t=Math.sin((1-d)*n)/p,s=Math.sin(d*n)/p):(t=1-d,s=d),a[0]=t*e+s*h,a[1]=t*f+s*k,a[2]=t*g+s*l,a[3]=t*b+s*c,a};x.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,g=g?1/g:0;return a[0]=-c*g,a[1]=-d*g,a[2]=-e*g,a[3]=f*g,a};x.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a};x.length=m.length;x.len=x.length;
x.squaredLength=m.squaredLength;x.sqrLen=x.squaredLength;x.normalize=m.normalize;x.fromMat3=function(){var a="undefined"!=typeof Int8Array?new Int8Array([1,2,0]):[1,2,0];return function(b,c){var d=c[0]+c[4]+c[8];if(0<d)d=Math.sqrt(d+1),b[3]=0.5*d,d=0.5/d,b[0]=(c[7]-c[5])*d,b[1]=(c[2]-c[6])*d,b[2]=(c[3]-c[1])*d;else{var e=0;c[4]>c[0]&&(e=1);c[8]>c[3*e+e]&&(e=2);var f=a[e],g=a[f],d=Math.sqrt(c[3*e+e]-c[3*f+f]-c[3*g+g]+1);b[e]=0.5*d;d=0.5/d;b[3]=(c[3*g+f]-c[3*f+g])*d;b[f]=(c[3*f+e]+c[3*e+f])*d;b[g]=
(c[3*g+e]+c[3*e+g])*d}return b}}();x.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof s&&(s.quat=x)})(u)})(this);Rubikjs.Render.Buffer=function(v){v&&(this.data=v)};Rubikjs.Render.Buffer.prototype.feed=function(v){this.data=v};Rubikjs.Render.Buffer.prototype.copy=function(){return new Rubikjs.Render.Buffer(this.data)};
Rubikjs.Render.Renderer=function(v){v&&(this.perspectiveMat=mat4.create(),mat4.perspective(this.perspectiveMat,70,v.offsetWidth/v.offsetHeight,0.1,100),this.element=v)};Rubikjs.Render.Renderer.prototype.startFrame=function(){};Rubikjs.Render.Renderer.prototype.render=function(v){};Rubikjs.Render.Renderer.prototype.endFrame=function(){};Rubikjs.Render.Renderer.prototype.createMesh=function(){return new Rubikjs.Mesh};
Rubikjs.Render.Mesh=function(){this.transform=mat4.create();this.vertexBuffer=new Rubikjs.Render.Buffer;this.colorBuffer=new Rubikjs.Render.Buffer;this.indexBuffer=new Rubikjs.Render.Buffer};
Rubikjs.Render.RenderManager=function(v){this.meshs=[];this.renderer=v?new v(document.getElementById("cube")):new Rubikjs.WebGL.Renderer(document.getElementById("cube"));mat4.translate(this.renderer.perspectiveMat,this.renderer.perspectiveMat,[0,0,-15]);mat4.rotateX(this.renderer.perspectiveMat,this.renderer.perspectiveMat,Math.PI/6);mat4.rotateY(this.renderer.perspectiveMat,this.renderer.perspectiveMat,-Math.PI/6)};
Rubikjs.Render.RenderManager.prototype.render=function(){this.renderer.startFrame();var v=this;this.meshs.forEach(function(u){v.renderer.render(u)});this.renderer.endFrame()};Rubikjs.Render.PieceFactory=function(v,u,s,J,p,D){this.pieceConstructor=v;this.vertexBuffer=u;this.indexBuffer=s;this.colorBuffer=J;this.namedColorBuffer=p;this.defaultColors=D};
Rubikjs.Render.PieceFactory.prototype.create=function(v,u,s){var J={},p;for(p in this.defaultColors)J[p]=this.defaultColors[p];for(p in s)J[p]=s[p];p=this.namedColorBuffer.map(function(p){return J[p]}).reduce(function(p,s){return p.concat(s)},[]);s=this.colorBuffer.copy();s.feed(p);p=new Rubikjs.Render.Mesh;p.vertexBuffer=this.vertexBuffer;p.indexBuffer=this.indexBuffer;p.colorBuffer=s;mat4.translate(p.transform,p.transform,v);mat4.rotateX(p.transform,p.transform,u[0]);mat4.rotateY(p.transform,p.transform,
u[1]);mat4.rotateZ(p.transform,p.transform,u[2]);return new this.pieceConstructor(p)};
